/*making the cursor*/
DO $$
<<my_cursor_example1>>
DECLARE
	tenant_cursor CURSOR FOR SELECT t_surname, t_forenames FROM tenant;
BEGIN
	FOR tc IN tenant_cursor
	LOOP
		RAISE NOTICE '% %',tc.t_forenames, tc.t_surname;
	END LOOP;
END my_cursor_example1 $$


/*Procedure that interacts with the cursor*/
CREATE OR REPLACE PROCEDURE show_tenants3()
LANGUAGE 'plpgsql' AS
$BODY$
DECLARE
    tenant_cursor3 CURSOR  FOR 
        SELECT t_surname, t_forenames FROM tenant;
    my_tenant TENANT%ROWTYPE;
BEGIN
    OPEN tenant_cursor3;
    LOOP
        FETCH NEXT FROM tenant_cursor3 INTO my_tenant.t_surname, my_tenant.t_forenames;
        EXIT WHEN NOT FOUND;
        RAISE NOTICE '% %', my_tenant.t_forenames, my_tenant.t_surname;
    END LOOP;
    CLOSE tenant_cursor3;
END;
$BODY$
CALL show_tenants3();